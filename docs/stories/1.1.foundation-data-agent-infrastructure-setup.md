# Story 1.1: Foundation - Data Agent Infrastructure Setup

## Status
Draft

## Story
**As a** BMad-Method developer,
**I want** to establish the data practitioner expansion pack structure with core agent definitions,
**so that** the framework can support data analysis workflows.

## Acceptance Criteria
1. Create bmad-data-practitioner/ directory structure following expansion pack patterns
2. Implement 6 data agent definitions (data-product-manager, data-architect, data-engineer, data-analyst, ml-engineer, data-qa-engineer) with YAML configurations
3. Create base templates for data workflows (data-requirements-prd, data-architecture-doc)
4. Integrate expansion pack with existing installer and web-builder tools
5. Validate agents load correctly in both IDE and web environments

## Integration Verification
- IV1: Existing agents and workflows continue functioning without modification
- IV2: Web-builder successfully bundles new data agents alongside existing agents
- IV3: No performance degradation in agent loading or command execution

## Tasks / Subtasks

- [ ] Task 1: Create expansion pack directory structure (AC: 1)
  - [ ] Create `/expansion-packs/bmad-data-practitioner/` directory
  - [ ] Create subdirectories: agents/, templates/, tasks/, checklists/, data/, workflows/
  - [ ] Create `config.yaml` following existing expansion pack patterns
  - [ ] Verify directory structure matches existing expansion pack examples

- [ ] Task 2: Implement data agent definitions (AC: 2)
  - [ ] Create `data-product-manager.md` with YAML configuration and persona
  - [ ] Create `data-architect.md` with YAML configuration and persona
  - [ ] Create `data-engineer.md` with YAML configuration and persona
  - [ ] Create `data-analyst.md` with YAML configuration and persona
  - [ ] Create `ml-engineer.md` with YAML configuration and persona
  - [ ] Create `data-qa-engineer.md` with YAML configuration and persona
  - [ ] Validate all agent definitions follow existing YAML schema structure

- [ ] Task 3: Create base workflow templates (AC: 3)
  - [ ] Create `data-requirements-prd.yaml` template
  - [ ] Create `data-architecture-doc.yaml` template
  - [ ] Ensure templates follow existing template patterns with proper metadata
  - [ ] Test template rendering and validation

- [ ] Task 4: Integrate with installer and web-builder (AC: 4)
  - [ ] Update installer to recognize and install bmad-data-practitioner expansion pack
  - [ ] Enhance web-builder to include data agents in bundling process
  - [ ] Test installer creates proper directory structure and copies files
  - [ ] Validate web-builder generates correct agent bundles

- [ ] Task 5: Validation and testing (AC: 5)
  - [ ] Test agent loading in IDE environment
  - [ ] Test agent loading in web environment
  - [ ] Validate agent commands execute correctly
  - [ ] Run Integration Verification tests (IV1, IV2, IV3)

## Dev Notes

### Project Structure Information
[Source: architecture/source-tree-integration.md#new-file-organization]

**Expansion Pack Structure Required:**
```plaintext
expansion-packs/bmad-data-practitioner/
├── agents/              # Data-specific agent definitions
├── templates/           # Data workflow templates
├── tasks/               # Data-specific task workflows
├── checklists/          # Data quality and validation
├── data/                # Knowledge bases and preferences
├── workflows/           # Data analysis process flows
└── config.yaml          # Expansion pack configuration
```

**File Naming Conventions:**
[Source: architecture/source-tree-integration.md#integration-guidelines]
- All data agents follow hyphenated naming convention matching existing agent patterns
- Task files use verb-noun patterns consistent with existing task naming
- Template files maintain .yaml extension following existing template structure

### Agent Definition Standards
[Source: architecture/coding-standards-and-conventions.md#enhancement-specific-standards]

**Agent Workflow Standards:** 
- Data agents follow identical YAML schema structure as existing agents
- Natural language instructions maintain existing elicitation and template patterns
- Cross-agent workflow coordination uses established handoff mechanisms

**Example Agent Structure (based on existing patterns):**
```yaml
agent:
  name: [AgentName]
  id: [agent-id]
  title: [Agent Title]
  icon: [emoji]
  whenToUse: [usage description]
persona:
  role: [role description]
  style: [communication style]
  identity: [agent identity]
  focus: [primary focus areas]
commands:
  - help: Show available commands
  - [command]: [description]
dependencies:
  tasks: [task files]
  templates: [template files]
  checklists: [checklist files]
```

### Existing Technology Integration
[Source: architecture/tech-stack-alignment.md#existing-technology-stack]

**Core Technologies to Maintain:**
- Node.js >=20.0.0 runtime compatibility
- YAML processing via js-yaml ^4.1.0
- CLI framework via commander ^14.0.0
- File operations via fs-extra ^11.3.0

### Component Integration Points
[Source: architecture/component-architecture.md#agentcoordinator]

**AgentCoordinator Responsibilities:**
- YAML-based agent definition processing following existing patterns
- Cross-agent workflow coordination and handoff management
- Specialized data agent command execution and validation
- Integration with existing IDE configurations (Cursor, Claude Code, Windsurf, VS Code)

**Dependencies:**
- Existing Components: Agent orchestration system, YAML processing, IDE integration patterns
- Technology Stack: Node.js agent framework, YAML configuration, natural language processing

### Critical Integration Requirements
[Source: architecture/coding-standards-and-conventions.md#critical-integration-rules]

**Existing API Compatibility:** All existing BMad-Method CLI commands, agent workflows, and web-builder functionality must remain completely unchanged - new functionality is purely additive through expansion pack patterns

**Import/Export Pattern Consistency:** 
[Source: architecture/source-tree-integration.md#integration-guidelines]
- All new JavaScript modules use existing ES6 import/export patterns
- YAML configuration loading follows existing yaml-utils.js patterns
- Agent definition processing maintains existing dependency-resolver.js integration

## Testing

### Testing Standards from Architecture
[Source: architecture/testing-strategy.md#integration-with-existing-tests]

**Test Framework:** Jest ^30.0.4 with existing test organization patterns
**Test Location:** `/tests/data-services/` following existing test organization patterns, mirroring source code structure
**Integration Testing:** All existing BMad-Method functionality must continue working unchanged, regression testing for core agent workflows and CLI tools

**Specific Testing Requirements for This Story:**
- Validate expansion pack directory structure creation
- Test agent definition YAML parsing and validation
- Verify agent loading in both IDE and web environments
- Ensure existing agents continue functioning (regression testing)
- Test web-builder bundling process with new agents
- Performance testing to ensure no degradation in agent loading times

**Test Files to Create:**
- `/tests/data-services/agent-coordinator.test.js` - Agent loading and validation tests
- `/tests/data-services/expansion-pack-installer.test.js` - Installation process tests
- `/tests/integration/existing-system-compatibility.test.js` - Regression tests for existing functionality

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-08-08 | 1.0 | Initial story creation for foundation infrastructure | SM Bob |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*Results from QA Agent review will be populated here*